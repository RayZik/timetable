<div class="ui compact message myCell">
    <!--subject-->
    <div class="myLine">
        <div *ngIf="cell.subject.length>0">
            <div *ngFor="let item of cell.subject" class="myHoverItem">
                <div (click)="deleteSubject(item._id, cell._id)" class="myDelete">
                    {{item.name}}
                </div>
                <div class="myHoverBlock">
                    <button class=" mini circular ui icon button" *ngIf="!idSubject.show" (click)="showSelectSubject(cell._id)"><i class="icon plus"></i></button>
                </div>
                <div *ngIf="idSubject.show" class="myInline">
                    <select (click)="setSubjectId($event.target.value)">
                     <option *ngFor="let subject of subjects" [value]="subject._id" >{{subject.name}}</option>
                 </select>
                    <button class="mini circular ui icon button" (click)="addSubject()"><i class="icon checkmark"></i></button>
                </div>
            </div>
        </div>

        <div *ngIf="cell.subject.length===0">
            <div>
                <button class=" mini circular ui icon button" *ngIf="!idSubject.show" (click)="showSelectSubject(cell._id)"><i class="icon plus"></i></button>
            </div>
            <div *ngIf="idSubject.show" class="myInline">
                <select (click)="setSubjectId($event.target.value)">
                     <option *ngFor="let subject of subjects" [value]="subject._id" >{{subject.name}}</option>
                 </select>
                <button class="mini circular ui icon button" (click)="addSubject()"><i class="icon checkmark"></i></button>
            </div>
        </div>
    </div>

    <!--teacher-->
    <div class="myLine">
        <div *ngIf="cell.teacher.length>0">
            <div *ngFor="let item of cell.teacher" class="myHoverItem">
                <div (click)="deleteTeacher(item._id, cell._id)" class="myDelete">
                    {{item.surname}} {{item.name}} {{item.lastName}}
                </div>
                <div class="myHoverBlock">
                    <button class=" mini circular ui icon button" *ngIf="!idTeacher.show" (click)="showSelectTeacher(cell._id)"><i class="icon plus"></i></button>
                </div>
                <div *ngIf="idTeacher.show" class="myInline">
                    <select (click)="setTeacherId($event.target.value)">
                     <option *ngFor="let teacher of teachers" [value]="teacher._id" >{{teacher.surname}} {{teacher.name}} {{teacher.lastName}}</option>
                 </select>
                    <button class="mini circular ui icon button" (click)="addTeacher()"><i class="icon checkmark"></i></button>
                </div>
            </div>
        </div>
        <div *ngIf="cell.teacher.length===0">
            <div>
                <button class="mini circular ui icon button" *ngIf="!idTeacher.show" (click)="showSelectTeacher(cell._id)"><i class="icon plus"></i></button>
            </div>
            <div *ngIf="idTeacher.show" class="myInline">
                <select (click)="setTeacherId($event.target.value)">
                     <option *ngFor="let teacher of teachers" [value]="teacher._id" >{{teacher.surname}} {{teacher.name}} {{teacher.lastName}}</option>
                 </select>
                <button class="mini circular ui icon button" (click)="addTeacher()"><i class="icon checkmark"></i></button>
            </div>
        </div>
    </div>

    <!--group-->
    <div class="myLine">
        <div *ngIf="cell.group.length>0">
            <div *ngFor="let item of cell.group" class="myHoverItem">
                <div (click)="deleteGroup(item._id, cell._id)" class="myDelete">
                    {{item.name}}
                </div>
                <div class="myHoverBlock">
                    <button class=" mini circular ui icon button" *ngIf="!idGroup.show" (click)="showSelectGroup(cell._id)"><i class="icon plus"></i></button>
                </div>
                <div *ngIf="idGroup.show" class="myInline">
                    <select (click)="setGroupId($event.target.value)">
                     <option *ngFor="let group of groups" [value]="group._id" >{{group.name}}</option>
                 </select>
                    <button class="mini circular ui icon button" (click)="addGroup()"><i class="icon checkmark"></i></button>
                </div>
            </div>
        </div>

        <div *ngIf="cell.group.length===0">
            <div>
                <button class=" mini circular ui icon button" *ngIf="!idGroup.show" (click)="showSelectGroup(cell._id)"><i class="icon plus"></i></button>
            </div>
            <div *ngIf="idGroup.show" class="myInline">
                <select (click)="setGroupId($event.target.value)">
                     <option *ngFor="let group of groups" [value]="group._id" >{{group.name}}</option>
                 </select>
                <button class="mini circular ui icon button" (click)="addGroup()"><i class="icon checkmark"></i></button>
            </div>
        </div>
    </div>

    <!--office-->
    <div class="myLine">
        <div *ngIf="cell.office.length>0">
            <div *ngFor="let item of cell.office" class="myHoverItem">
                <div (click)="deleteOffice(item._id, cell._id)" class="myDelete">
                    {{item.name}}
                </div>
                <div class="myHoverBlock">
                    <button class=" mini circular ui icon button" *ngIf="!idOffice.show" (click)="showSelectOffice(cell._id)"><i class="icon plus"></i></button>
                </div>
                <div *ngIf="idOffice.show" class="myInline">
                    <select (click)="setOfficeId($event.target.value)">
                     <option *ngFor="let office of offices" [value]="office._id" >{{office.name}}</option>
                 </select>
                    <button class="mini circular ui icon button" (click)="addOffice()"><i class="icon checkmark"></i></button>
                </div>
            </div>
        </div>
        <div *ngIf="cell.office.length===0">
            <div>
                <button class=" mini circular ui icon button" *ngIf="!idOffice.show" (click)="showSelectOffice(cell._id)"><i class="icon plus"></i></button>
            </div>
            <div *ngIf="idOffice.show" class="myInline">
                <select (click)="setOfficeId($event.target.value)">
                     <option *ngFor="let office of offices" [value]="office._id" >{{office.name}}</option>
                 </select>
                <button class="mini circular ui icon button" (click)="addOffice()"><i class="icon checkmark"></i></button>
            </div>
        </div>
    </div>

    <div>
        <button *ngIf="showSaveButton" class="mini ui icon button" (click)="clickSaveCell(repeatModal,cell)"><i class="icon save"></i></button>
        <button *ngIf="!showSaveButton" class="mini ui icon button" (click)="deleteCellToEnd(cell._id)"><i class="icon minus"></i></button>
    </div>
    <div class="col-md-6 col-md-offset-3">
        <button (click)="openModal('custom-modal-1')">Open Modal 1</button>
        <button (click)="openModal('custom-modal-2')">Open Modal 2</button>
    </div>
</div>



<sm-modal title="Повторяющееся событие" #repeatModal>
    <modal-content>
        <sm-list>
            <table width="100%" cellspacing="0" cellpadding="5" class="myTableModal">
                <tr>
                    <td valign="top">Повторяется:</td>
                    <td valign="top">
                        <select class="ui dropdown" #repeatWith (click)='settings(repeatWith.value, cell)'>
                            <option value="day">каждый день</option>
                            <option value="week">каждую неделю</option>
                            <option value ="month">каждый месяц</option>
                        </select></td>
                </tr>

                <ng-container *ngIf='configSave.repeat === "day"'>
                    <tr>
                        <td width="200" valign="top">Дни повторения:</td>
                        <td valign="top">
                            <div class="ui form">
                                <div class="inline fields">
                                    <div class="field" *ngFor='let dName of daysName; let idx = index'>
                                        <div class="ui checkbox">
                                            <input type="checkbox" #selDays (change)='selectDays(selDays,idx)'>
                                            <label>{{dName}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </ng-container>

                <ng-container *ngIf='configSave.repeat === "week"'>
                    <tr>
                        <td valign="top">Повторять с интервалом:</td>
                        <td valign="top">
                            <select class="ui dropdown" #repeatWithInterval (change)='configSave.repeatWithInterval = repeatWithInterval.value'>
                            <option  value='1' selected>1</option>
                            <option *ngFor='let el of arrRepWithInter'>{{el}}</option>
                        </select>
                        </td>
                    </tr>
                    <tr>
                        <td width="200" valign="top">Дни повторения:</td>
                        <td valign="top">
                            <div class="ui form">
                                <div class="inline fields">
                                    <div class="field" *ngFor='let dName of daysName; let idx = index'>
                                        <div class="ui checkbox">
                                            <input type="checkbox" #selDays (change)='selectDays(selDays,idx)'>
                                            <label>{{dName}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td width="200" valign="top">Дата начала:</td>
                        <td valign="top">
                            <div class="ui input">
                                <input type="date" [value]="configSave.beginDate" #begin (change)='configSave.beginDate = begin.value'>
                            </div>
                        </td>
                    </tr>
                </ng-container>

                <ng-container *ngIf='configSave.repeat === "month"'>
                    <tr>
                        <td valign="top">Повторять с интервалом:</td>
                        <td valign="top">
                            <select class="ui dropdown" #repeatWithInterval (change)='configSave.repeatWithInterval = repeatWithInterval.value'>
                            <option selected>1</option>
                            <option *ngFor='let el of arrRepWithInter'>{{el}}</option>
                        </select>
                        </td>
                    </tr>

                    <tr>
                        <td width="200" valign="top">Дата начала:</td>
                        <td valign="top">
                            <div class="ui input">
                                <input type="date" [value]="configSave.beginDate" #begin (change)='configSave.beginDate = begin.value'>
                            </div>
                        </td>
                    </tr>
                </ng-container>

            </table>
        </sm-list>
    </modal-content>
    <modal-actions>
        <div class="ui button" (click)="deleteCellToEnd(cell._id);repeatModal.hide();">Удалить Все </div>
        <div class="ui button" (click)="deleteCellMoment(cell);repeatModal.hide();">Удалить с этой до кон</div>
        <div class="ui button" (click)="deleteThisCell(cell);repeatModal.hide();">Удалить только эту</div>

        <div class="ui right floated  positive button primary" (click)="saveCell(configSave,cell);">Сохранить</div>
    </modal-actions>
</sm-modal>