<br>
<div class="ui container">

    <input type="date" name="beginDate" (blur)='newDate.beginDate = $event.target.value'>
    <input type="date" name="endDate" (blur)='newDate.endDate = $event.target.value'>
    <div class="ui button" (click)="addDate(newDate)">Добавить</div><br>

    <!--Фильтр-->
    <tt-filter (onChanged)="onChanged($event)" [dateList]='dateList' [holidayList]='holidayList'></tt-filter>


    <!--Таблица-->
    <table class="ui celled table" id="timetable">
        <thead>
            <tr>
                <th></th>
                <th *ngFor="let date of dateList;">
                    <div *ngIf='!date.isHoliday'>{{date.day|amDateFormat:'ll' }}</div>
                    <div *ngIf='date.isHoliday' [ngStyle]="{'background':'red'}">{{date.day|amDateFormat:'ll' }}</div>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let items of timeList">
                <td><i class="icon Minus Square Outline" (click)="deleteTimeLesson(items)"></i> {{(items.begin | amFromUnix)|amDateFormat:'LT'}}-{{(items.end|
                    amFromUnix)|amDateFormat:'LT'}}
                </td>

                <td *ngFor="let slot of items.slots; let dayIndex = index" [dragula]='"bag"' [dragulaModel]='slot'>
                    <tt-cell *ngFor="let cell of slot" [cell]='cell' [showSaveButton]='showSaveButton' (onChangedSaveCell)='onChangedSaveCell($event)'
                        (click)="createModal.show({blurring: false,closable: false});cellForSave = cell;"></tt-cell>

                        <!--Модальное окно сохранения ячейки расписания-->
                        <sm-modal title="Сохранение данных" #createModal>
                            <modal-content>
                                <sm-list>
                                    <sm-item>
                                        <div>
                                            <select class="ui dropdown" #categSave>
                                            <option value="week">Неделя</option>
                                            <option value="everyWeek">Каждая неделя</option>
                                            <option value="cherezWeek">Через неделю</option>
                                        </select>
                                        </div>
                                    </sm-item>
                                </sm-list>
                            </modal-content>
                            <modal-actions>
                                <div class="ui buttons">
                                    <div class="ui positive button primary" (click)="saveCell(categSave.value,dayIndex,items.begin,items.end);showSaveButton = true;">Сохранить</div>
                                    <div class="ui negative button primary" (click)="createModal.hide();showSaveButton = true;">Выйти</div>
                                </div>
                            </modal-actions>
                        </sm-modal>
                        <!---->
                </td>
            </tr>

            <tr>
                <td>
                    <input type="time" name="begin" (blur)='lesson.begin = $event.target.value'>
                    <input type="time" name="end" (blur)='lesson.end = $event.target.value'>
                    <div class="ui button" (click)="addLesson(lesson)">Добавить</div>
                </td>
            </tr>

        </tbody>
        <tfoot>

        </tfoot>
    </table>
    <br>

    <div class="ui message" [dragula]='"bag"' [dragulaModel]='cellTimetable'>
        <div *ngFor="let item of cellTimetable">
            <tt-cell [cell]='item'></tt-cell>
        </div>
    </div>

</div>

<!--Добавление ячейки-->
<button class=" container circular ui icon button" (click)="addCell()"><i class="icon plus"></i></button>